<html>

<head>
  <title>JWT Test</title>
</head>

<body>
  <script>
    function send() {
      var x = new XMLHttpRequest();
      x.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          alert(this.responseText);
        } else {
          var json = JSON.parse(this.responseText);
          alert(json.message);
        }
      };
      x.open('POST', '/restricted', false);
      x.setRequestHeader('Authorization', getCookie('token_auth_backend'));
      x.send();
    }

    function getCookie(name) {
      var value = "; " + document.cookie;
      var parts = value.split("; " + name + "=");
      if (parts.length == 2) return parts.pop().split(";").shift();
    }
  </script>
  <form>
    <label>Nome: </label>
    <input type="text" id="nome" name="nome" />
    <input type="button" value="Enviar" onclick="javascript:send()" />
  </form>
</body>

</html>
